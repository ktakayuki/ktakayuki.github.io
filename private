<h2>小池個人用ページ</h2>

<h3>備忘録</h3>
<a href="https://blogtter.herokuapp.com/login">blogtter編集ページ</a>

<h3>外部読み込み実験</h3>

<script type="text/javascript" src="./jquery.xdomainajax.js"></script>
<script type="text/javascript" src="jquery.bottom-1.0.js"></script>
<script>
//読み込み最終
var N=10;
//何件づつ読み込むか
var M=10;
// 引っ張ってきたいサイトのURL
url = 'https://blogtter.herokuapp.com/';
$.get(url, function(data){
var itime;
var itweet;
var itag;
var i;
for(i=1;i<=N;i++){
	itag = ".tweet"+i;
	itweet = $(data.responseText).filter(itag).text();
	$("#text").append(itweet+"<br>");
	itag = ".time"+i;
	itime = $(data.responseText).filter(itag).text();
	$("#text").append(itime+"<br><br>");
	}
});

$(function() {
 
    // オプションのproximityでbottom.jsを発生する位置を指定する
    $(window).bottom({proximity: 0.05});
    $(window).bind('bottom', function() {
 
        var obj = $(this);
 
        // 「loading」がfalseの時に実行
        if (!obj.data('loading')) {
 
            // 「loading」をtrueにする
            obj.data('loading', true);
 
            // ローディング画像を表示
            $('#loadimg').html('<img src="load.gif" />');
 
            // 追加したい処理を記述
            setTimeout(function() {
 
                // ローディング画像を削除
                $('#loadimg').html('');
 
                // 追加するHTMLを指定
				url = 'https://blogtter.herokuapp.com/';
				$.get(url, function(data){
				var itime;
				var itweet;
				var itag;
				var i;
				for(i=N+1;i<=N+M;i++){
					itag = ".tweet"+i;
					itweet = $(data.responseText).filter(itag).text();
					if(itweet!=""){
						$("#text").append(itweet+"<br>");
						itag = ".time"+i;
						itime = $(data.responseText).filter(itag).text();
						$("#text").append(itime+"<br><br>");
						}
					}
				N=N+M;
				});
				
 
                // 処理が完了したら「loading」をfalseにする
                obj.data('loading', false);
 
            }, 1500);
        }
 
    });
 
    // リロードしたときにページの先頭を表示する
    $('html,body').animate({ scrollTop: 0 }, '1');
 
});

</script>

<style type="text/css">
#loadimg {
    padding-top: 50px;
    clear: both;
    text-align: center;
}
</style>

<div id="text"></div>

<div id="loadimg"></div>